(()=>{var e={};e.id=7510,e.ids=[7510],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},10467:e=>{"use strict";e.exports=require("next/dist/compiled/@vercel/og/index.node.js")},41790:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page-experimental.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},71267:e=>{"use strict";e.exports=require("worker_threads")},59796:e=>{"use strict";e.exports=require("zlib")},82533:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>b,originalPathname:()=>u,pages:()=>f,routeModule:()=>p,tree:()=>c});var a=s(73137),n=s(54647),r=s(4183),d=s.n(r),i=s(71775),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let l=a.AppPageRouteModule,c=["",{children:["(root)",{children:["question",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3373)),"C:\\Users\\af_K_ar\\stack_overflow_nextjs14\\app\\(root)\\question\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,6630)),"C:\\Users\\af_K_ar\\stack_overflow_nextjs14\\app\\(root)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,83932)),"C:\\Users\\af_K_ar\\stack_overflow_nextjs14\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,51918,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],f=["C:\\Users\\af_K_ar\\stack_overflow_nextjs14\\app\\(root)\\question\\[id]\\page.tsx"],u="/(root)/question/[id]/page",b={require:s,loadChunk:()=>Promise.resolve()},p=new l({definition:{kind:n.x.APP_PAGE,page:"/(root)/question/[id]/page",pathname:"/question/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},38159:(e,t,s)=>{let a={"06c5328d42eaccb06434c42be1df2676122c9355":()=>Promise.resolve().then(s.bind(s,92503)).then(e=>e.globalSearch),a5d0446bf00a8fc42b9053a0f87464364d623485:()=>Promise.resolve().then(s.bind(s,72142)).then(e=>e.viewQuestion)};async function endpoint(e,...t){let s=await a[e]();return s.apply(null,t)}e.exports={"06c5328d42eaccb06434c42be1df2676122c9355":endpoint.bind(null,"06c5328d42eaccb06434c42be1df2676122c9355"),a5d0446bf00a8fc42b9053a0f87464364d623485:endpoint.bind(null,"a5d0446bf00a8fc42b9053a0f87464364d623485")}},70450:(e,t,s)=>{let a={"821c7762b2060bdce10837322b48adc18d240fe0":()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.getQuestions),"3bc2359fa248fe8d9bb51f32f694f8168afc4eff":()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.createQuestion),f965694f345c18cee82acdbc5c368f054d15290f:()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.getQuestionById),b59c2737e199d82f69502500447398331027dd41:()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.upvoteQuestion),dd881be5cec2daccfbd91fce885c73c6a57d3618:()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.downvoteQuestion),db4a18dc7615bcdc23047151fe6fd7b77a1fb44c:()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.deleteQuestion),"67bd28a4564c2a0921aaa97c4e0eaa2fe0012ec9":()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.editQuestion),"12576103a6c44923d6f02ed638154e8fe0b75370":()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.getHotQuestions),b933556f3edfcde6177da02173a0e964ef73d845:()=>Promise.resolve().then(s.bind(s,20519)).then(e=>e.getRecommendedQuestions),"5e0056903e1618bbcb06c4616a225605eac62ed6":()=>Promise.resolve().then(s.bind(s,98976)).then(e=>e.getTopInteractedTags),"6b893ecf9522374bd68298d421fefa59c684f7d2":()=>Promise.resolve().then(s.bind(s,98976)).then(e=>e.getAllTags),"1683de04029ffd8bfadfa76a4427256f1689231d":()=>Promise.resolve().then(s.bind(s,98976)).then(e=>e.getQuestionsByTagId),"8d24a67398aa9d329bb7401320e50519799a8a2b":()=>Promise.resolve().then(s.bind(s,98976)).then(e=>e.getTopPopularTags),fc4877523a45028429d9a70350ff51de17b607a9:()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.getUserById),"7d20741c78a0b68592df13e4ffe92a94afa22362":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.createUser),"11bc936fed380b52618f262897b07b2059703b1e":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.updateUser),"62037266a36f7331f901cadf4479632dccd62993":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.deleteUser),"5eac4975dfc1d67df097009d83eaa9b62fde705d":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.getAllUsers),"64b2e76038ba15cd0ea85bcd5fa20e8ab9ddd862":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.toggleSaveQuestion),"3eff637a2f553dfb93da6bf176d7af974fc22146":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.getSavedQuestions),"1c04a387b8c5cab08c3f4be50f63d49799b74556":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.getUserInfo),"25593527bec0b3a35f1445a2cb3d5f0b2625b887":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.getUserQuestions),"3434ed278f0c14a85d4d88ccce6c26d1a0ee95a7":()=>Promise.resolve().then(s.bind(s,60954)).then(e=>e.getUserAnswers),a26cfab82e657f85461741e2621aa36d570f3e69:()=>Promise.resolve().then(s.bind(s,34138)).then(e=>e.createAnswer),bd7a68644f0547dc34cbb8c8f4fc24ad0d5abb98:()=>Promise.resolve().then(s.bind(s,34138)).then(e=>e.getAnswers),e8c78d4011846d98f1a75e21ef9379b111744f8c:()=>Promise.resolve().then(s.bind(s,34138)).then(e=>e.upvoteAnswer),b11e4b41f2a7679048617314185a1a228f2628b3:()=>Promise.resolve().then(s.bind(s,34138)).then(e=>e.downvoteAnswer),e65f0e73bb29bb59a1b3125c774525b8568a53ba:()=>Promise.resolve().then(s.bind(s,34138)).then(e=>e.deleteAnswer)};async function endpoint(e,...t){let s=await a[e]();return s.apply(null,t)}e.exports={"821c7762b2060bdce10837322b48adc18d240fe0":endpoint.bind(null,"821c7762b2060bdce10837322b48adc18d240fe0"),"3bc2359fa248fe8d9bb51f32f694f8168afc4eff":endpoint.bind(null,"3bc2359fa248fe8d9bb51f32f694f8168afc4eff"),f965694f345c18cee82acdbc5c368f054d15290f:endpoint.bind(null,"f965694f345c18cee82acdbc5c368f054d15290f"),b59c2737e199d82f69502500447398331027dd41:endpoint.bind(null,"b59c2737e199d82f69502500447398331027dd41"),dd881be5cec2daccfbd91fce885c73c6a57d3618:endpoint.bind(null,"dd881be5cec2daccfbd91fce885c73c6a57d3618"),db4a18dc7615bcdc23047151fe6fd7b77a1fb44c:endpoint.bind(null,"db4a18dc7615bcdc23047151fe6fd7b77a1fb44c"),"67bd28a4564c2a0921aaa97c4e0eaa2fe0012ec9":endpoint.bind(null,"67bd28a4564c2a0921aaa97c4e0eaa2fe0012ec9"),"12576103a6c44923d6f02ed638154e8fe0b75370":endpoint.bind(null,"12576103a6c44923d6f02ed638154e8fe0b75370"),b933556f3edfcde6177da02173a0e964ef73d845:endpoint.bind(null,"b933556f3edfcde6177da02173a0e964ef73d845"),"5e0056903e1618bbcb06c4616a225605eac62ed6":endpoint.bind(null,"5e0056903e1618bbcb06c4616a225605eac62ed6"),"6b893ecf9522374bd68298d421fefa59c684f7d2":endpoint.bind(null,"6b893ecf9522374bd68298d421fefa59c684f7d2"),"1683de04029ffd8bfadfa76a4427256f1689231d":endpoint.bind(null,"1683de04029ffd8bfadfa76a4427256f1689231d"),"8d24a67398aa9d329bb7401320e50519799a8a2b":endpoint.bind(null,"8d24a67398aa9d329bb7401320e50519799a8a2b"),fc4877523a45028429d9a70350ff51de17b607a9:endpoint.bind(null,"fc4877523a45028429d9a70350ff51de17b607a9"),"7d20741c78a0b68592df13e4ffe92a94afa22362":endpoint.bind(null,"7d20741c78a0b68592df13e4ffe92a94afa22362"),"11bc936fed380b52618f262897b07b2059703b1e":endpoint.bind(null,"11bc936fed380b52618f262897b07b2059703b1e"),"62037266a36f7331f901cadf4479632dccd62993":endpoint.bind(null,"62037266a36f7331f901cadf4479632dccd62993"),"5eac4975dfc1d67df097009d83eaa9b62fde705d":endpoint.bind(null,"5eac4975dfc1d67df097009d83eaa9b62fde705d"),"64b2e76038ba15cd0ea85bcd5fa20e8ab9ddd862":endpoint.bind(null,"64b2e76038ba15cd0ea85bcd5fa20e8ab9ddd862"),"3eff637a2f553dfb93da6bf176d7af974fc22146":endpoint.bind(null,"3eff637a2f553dfb93da6bf176d7af974fc22146"),"1c04a387b8c5cab08c3f4be50f63d49799b74556":endpoint.bind(null,"1c04a387b8c5cab08c3f4be50f63d49799b74556"),"25593527bec0b3a35f1445a2cb3d5f0b2625b887":endpoint.bind(null,"25593527bec0b3a35f1445a2cb3d5f0b2625b887"),"3434ed278f0c14a85d4d88ccce6c26d1a0ee95a7":endpoint.bind(null,"3434ed278f0c14a85d4d88ccce6c26d1a0ee95a7"),a26cfab82e657f85461741e2621aa36d570f3e69:endpoint.bind(null,"a26cfab82e657f85461741e2621aa36d570f3e69"),bd7a68644f0547dc34cbb8c8f4fc24ad0d5abb98:endpoint.bind(null,"bd7a68644f0547dc34cbb8c8f4fc24ad0d5abb98"),e8c78d4011846d98f1a75e21ef9379b111744f8c:endpoint.bind(null,"e8c78d4011846d98f1a75e21ef9379b111744f8c"),b11e4b41f2a7679048617314185a1a228f2628b3:endpoint.bind(null,"b11e4b41f2a7679048617314185a1a228f2628b3"),e65f0e73bb29bb59a1b3125c774525b8568a53ba:endpoint.bind(null,"e65f0e73bb29bb59a1b3125c774525b8568a53ba")}},12550:(e,t,s)=>{Promise.resolve().then(s.bind(s,14270)),Promise.resolve().then(s.bind(s,81802)),Promise.resolve().then(s.bind(s,45260)),Promise.resolve().then(s.bind(s,87274)),Promise.resolve().then(s.bind(s,80455)),Promise.resolve().then(s.bind(s,16373)),Promise.resolve().then(s.bind(s,52990)),Promise.resolve().then(s.bind(s,84102)),Promise.resolve().then(s.bind(s,54390)),Promise.resolve().then(s.bind(s,31704)),Promise.resolve().then(s.bind(s,90222)),Promise.resolve().then(s.t.bind(s,25251,23)),Promise.resolve().then(s.t.bind(s,41297,23))},14270:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=s(60080),n=s(60806),r=s(66558),d=s(1269),i=s(83894),o=s(79689),l=s(9885),c=s(92076),f=s(68384),u=s(52451),b=s.n(u),p=s(76782),h=s(57114);let __WEBPACK_DEFAULT_EXPORT__=({question:e,questionId:t,authorId:s})=>{let u=(0,h.usePathname)(),[m,v]=(0,l.useState)(!1),[x,w]=(0,l.useState)(!1),{mode:g}=(0,c.useTheme)(),_=(0,l.useRef)(null),y=(0,r.cI)({resolver:(0,i.F)(d.iJ),defaultValues:{answer:""}}),handleCreateAnswer=async e=>{v(!0);try{if(await (0,p.yX)({content:e.answer,author:JSON.parse(s),question:JSON.parse(t),path:u}),y.reset(),_.current){let e=_.current;e.setContent("")}}catch(e){console.log(e)}finally{v(!1)}},generateAIAnswer=async()=>{if(s){w(!0);try{let t=await fetch("http://localhost:3000/api/chatgpt",{method:"POST",body:JSON.stringify({question:e})}),s=await t.json(),a=s.reply.replace(/\n/g,"<br />");if(_.current){let e=_.current;e.setContent(a)}}catch(e){console.log(e)}finally{w(!1)}}};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex flex-col justify-between gap-5 sm:flex-row sm:items-center sm:gap-2",children:[a.jsx("h4",{className:"paragraph-semibold text-dark400_light800",children:"Write your answer here"}),a.jsx(f.z,{className:"btn light-border-2 gap-1.5 rounded-md px-4 py-2.5 text-primary-500 shadow-none dark:text-primary-500",onClick:generateAIAnswer,children:x?a.jsx(a.Fragment,{children:"Generating..."}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(b(),{src:"/assets/icons/stars.svg",alt:"star",width:12,height:12,className:"object-contain"}),"Generate AI Answer"]})})]}),a.jsx(n.l0,{...y,children:(0,a.jsxs)("form",{className:"mt-6 flex w-full flex-col gap-10",onSubmit:y.handleSubmit(handleCreateAnswer),children:[a.jsx(n.Wi,{control:y.control,name:"answer",render:({field:e})=>(0,a.jsxs)(n.xJ,{className:"flex w-full flex-col gap-3",children:[a.jsx(n.NI,{className:"mt-3.5",children:a.jsx(o.M,{apiKey:"vkaek9veaylptsm9i9jqxtraouszi72foa8phrfhtv6pioeg",onInit:(e,t)=>{_.current=t},onBlur:e.onBlur,onEditorChange:t=>e.onChange(t),init:{height:350,menubar:!1,plugins:["advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","codesample","fullscreen","insertdatetime","media","table"],toolbar:"undo redo | codesample | bold italic forecolor | alignleft aligncenter |alignright alignjustify | bullist numlist",content_style:"body { font-family:Inter; font-size:16px }",skin:"dark"===g?"oxide-dark":"oxide",content_css:"dark"===g?"dark":"light"}})}),a.jsx(n.zG,{className:"text-red-500"})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx(f.z,{type:"submit",className:"primary-gradient w-fit text-white",disabled:m,children:m?"Submitting...":"Submit"})})]})})]})}},87274:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var a=s(60080),n=s(9885),r=s(68713),d=s.n(r),i=s(57554);s(35681),s(71311),s(35224),s(26022),s(60007),s(14238),s(81918),s(23353),s(25325),s(93194),s(58163),s(70967),s(18820),s(16470),s(18055),s(78791),s(23129),s(64493),s(73237),s(39442),s(40417),s(6209);let __WEBPACK_DEFAULT_EXPORT__=({data:e})=>((0,n.useEffect)(()=>{d().highlightAll()},[]),a.jsx("div",{className:"markdown w-full min-w-full",children:(0,i.ZP)(e)}))},80455:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>shared_Votes});var a=s(60080),n=s(76782);s(70391),s(53009);var r=(0,s(61324).$)("a5d0446bf00a8fc42b9053a0f87464364d623485"),d=s(78131),i=s(10122),o=s(23161),l=s(52451),c=s.n(l),f=s(57114),u=s(9885),b=s(67309);let shared_Votes=({type:e,itemId:t,userId:s,upvotes:l,hasupVoted:p,downvotes:h,hasdownVoted:m,hasSaved:v})=>{let x=(0,f.usePathname)(),w=(0,f.useRouter)(),handleSave=async()=>(await (0,i.iy)({userId:JSON.parse(s),questionId:JSON.parse(t),path:x}),(0,b.Am)({title:`Question ${v?"Removed from":"Saved in"} your collection`,variant:v?"destructive":"default"})),handleVote=async a=>s?"upvote"===a?("Question"===e?await (0,d.Rp)({questionId:JSON.parse(t),userId:JSON.parse(s),hasupVoted:p,hasdownVoted:m,path:x}):"Answer"===e&&await (0,n.jt)({answerId:JSON.parse(t),userId:JSON.parse(s),hasupVoted:p,hasdownVoted:m,path:x}),(0,b.Am)({title:`Upvote ${p?"Removed":"Successful"}`,variant:p?"destructive":"default"})):"downvote"===a?("Question"===e?await (0,d.MH)({questionId:JSON.parse(t),userId:JSON.parse(s),hasupVoted:p,hasdownVoted:m,path:x}):"Answer"===e&&await (0,n.Of)({answerId:JSON.parse(t),userId:JSON.parse(s),hasupVoted:p,hasdownVoted:m,path:x}),(0,b.Am)({title:`Downvote ${p?"Removed":"Successful"}`,variant:p?"destructive":"default"})):void 0:(0,b.Am)({title:"Please log in",description:"You must be logged in to perform this action"});return(0,u.useEffect)(()=>{r({questionId:JSON.parse(t),userId:s?JSON.parse(s):void 0})},[t,s,x,w]),(0,a.jsxs)("div",{className:"flex gap-5",children:[(0,a.jsxs)("div",{className:"flex-center gap-2.5",children:[(0,a.jsxs)("div",{className:"flex-center gap-1.5",children:[a.jsx(c(),{src:p?"/assets/icons/upvoted.svg":"/assets/icons/upvote.svg",width:18,height:18,alt:"upvote",className:"cursor-pointer",onClick:()=>handleVote("upvote")}),a.jsx("div",{className:"flex-center background-light700_dark400 min-w-[18px] rounded-sm p-1",children:a.jsx("p",{className:"subtle-medium text-dark400_light900",children:(0,o.yv)(l)})})]}),(0,a.jsxs)("div",{className:"flex-center gap-1.5",children:[a.jsx(c(),{src:m?"/assets/icons/downvoted.svg":"/assets/icons/downvote.svg",width:18,height:18,alt:"downvote",className:"cursor-pointer",onClick:()=>handleVote("downvote")}),a.jsx("div",{className:"flex-center background-light700_dark400 min-w-[18px] rounded-sm p-1",children:a.jsx("p",{className:"subtle-medium text-dark400_light900",children:(0,o.yv)(h)})})]})]}),"Question"===e&&a.jsx(c(),{src:v?"/assets/icons/star-filled.svg":"/assets/icons/star-red.svg",width:18,height:18,alt:"star",className:"cursor-pointer",onClick:handleSave})]})}},3373:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var a=s(48144),n=s(17536);let r=(0,n.createProxy)(String.raw`C:\Users\af_K_ar\stack_overflow_nextjs14\components\forms\Answer.tsx`),{__esModule:d,$$typeof:i}=r,o=r.default;s(53830);var l=s(76303),c=s(23228),f=s(34138),u=s(44602),b=s.n(u),p=s(75042),h=s.n(p),m=s(35082);let v=(0,n.createProxy)(String.raw`C:\Users\af_K_ar\stack_overflow_nextjs14\components\shared\ParseHTML.tsx`),{__esModule:x,$$typeof:w}=v,g=v.default,_=(0,n.createProxy)(String.raw`C:\Users\af_K_ar\stack_overflow_nextjs14\components\shared\Votes.tsx`),{__esModule:y,$$typeof:j}=_,A=_.default;var P=s(11156);let AllAnswers=async({questionId:e,userId:t,totalAnswers:s,page:n,filter:r})=>{let d=await (0,f.getAnswers)({questionId:e,page:n?+n:1,sortBy:r});return(0,a.jsxs)("div",{className:"mt-11",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("h3",{className:"primary-text-gradient",children:[s," Answers"]}),a.jsx(l.ZP,{filters:c.yL})]}),a.jsx("div",{children:d.answers.map(e=>(0,a.jsxs)("article",{className:"light-border border-b py-10",children:[(0,a.jsxs)("div",{className:"mb-8 flex flex-col-reverse justify-between gap-5 sm:flex-row sm:items-center sm:gap-2",children:[(0,a.jsxs)(b(),{href:`/profile/${e.author.clerkId}`,className:"flex flex-1 items-start gap-1 sm:items-center",children:[a.jsx(h(),{src:e.author.picture,width:18,height:18,alt:"profile",className:"rounded-full object-cover max-sm:mt-0.5"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[a.jsx("p",{className:"body-semibold text-dark300_light700",children:e.author.name}),(0,a.jsxs)("p",{className:"small-regular text-light400_light500 ml-0.5 mt-0.5 line-clamp-1",children:["answered "," ",(0,m.u3)(e.createdAt)]})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(A,{type:"Answer",itemId:JSON.stringify(e._id),userId:JSON.stringify(t),upvotes:e.upvotes.length,hasupVoted:e.upvotes.includes(t),downvotes:e.downvotes.length,hasdownVoted:e.downvotes.includes(t)})})]}),a.jsx(g,{data:e.content})]},e._id))}),a.jsx("div",{className:"mt-10 w-full",children:a.jsx(P.ZP,{pageNumber:n?+n:1,isNext:d.isNextAnswer})})]})};var N=s(30282),q=s(70753),k=s(20519),I=s(60954),S=s(38798);let Page=async({params:e,searchParams:t})=>{let s;let{userId:n}=(0,S.I8)();n&&(s=await (0,I.getUserById)({userId:n}));let r=await (0,k.getQuestionById)({questionId:e.id});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex-start w-full flex-col",children:[(0,a.jsxs)("div",{className:"flex w-full flex-col-reverse justify-between gap-5 sm:flex-row sm:items-center sm:gap-2",children:[(0,a.jsxs)(b(),{href:`/profile/${r.author.clerkId}`,className:"flex items-center justify-start gap-1",children:[a.jsx(h(),{src:r.author.picture,className:"rounded-full",width:22,height:22,alt:"profile"}),a.jsx("p",{className:"paragraph-semibold text-dark300_light700",children:r.author.name})]}),a.jsx("div",{className:"flex justify-end",children:a.jsx(A,{type:"Question",itemId:JSON.stringify(r._id),userId:JSON.stringify(s._id),upvotes:r.upvotes.length,hasupVoted:r.upvotes.includes(s._id),downvotes:r.downvotes.length,hasdownVoted:r.downvotes.includes(s._id),hasSaved:s?.saved.includes(r._id)})})]}),a.jsx("h2",{className:"h2-semibold text-dark200_light900 mt-3.5 w-full text-left",children:r.title})]}),(0,a.jsxs)("div",{className:"mb-8 mt-5 flex flex-wrap gap-4",children:[a.jsx(N.Z,{imgUrl:"/assets/icons/clock.svg",alt:"clock icon",value:` asked ${(0,m.u3)(r.createdAt)}`,title:" Asked",textStyles:"small-medium text-dark400_light800"}),a.jsx(N.Z,{imgUrl:"/assets/icons/message.svg",alt:"message",value:(0,m.yv)(r.answers.length),title:" Answers",textStyles:"small-medium text-dark400_light800"}),a.jsx(N.Z,{imgUrl:"/assets/icons/eye.svg",alt:"eye",value:(0,m.yv)(r.views),title:" Views",textStyles:"small-medium text-dark400_light800"})]}),a.jsx(g,{data:r.content}),a.jsx("div",{className:"mt-8 flex flex-wrap gap-2",children:r.tags.map(e=>a.jsx(q.Z,{_id:e._id,name:e.name,showCount:!1},e._id))}),a.jsx(AllAnswers,{questionId:r._id,userId:s._id,totalAnswers:r.answers.length,page:t?.page,filter:t?.filter}),a.jsx(o,{question:r.content,questionId:JSON.stringify(r._id),authorId:JSON.stringify(s._id)})]})},U=Page},34138:(e,t,s)=>{"use strict";s.r(t),s.d(t,{createAnswer:()=>createAnswer,deleteAnswer:()=>deleteAnswer,downvoteAnswer:()=>downvoteAnswer,getAnswers:()=>getAnswers,upvoteAnswer:()=>upvoteAnswer});var a=s(10459),n=s(95639),r=s(78291),d=s(7427),i=s(50561),o=s(71493),l=s(18886);async function createAnswer(e){try{(0,r.v)();let{content:t,author:s,question:a,path:c}=e,f=await n.Z.create({content:t,author:s,question:a}),u=await d.Z.findByIdAndUpdate(a,{$push:{answers:f._id}});await o.Z.create({user:s,action:"answer",question:a,answer:f._id,tags:u.tags}),await l.Z.findByIdAndUpdate(s,{$inc:{reputation:10}}),(0,i.revalidatePath)(c)}catch(e){throw console.log(e),e}}async function getAnswers(e){try{(0,r.v)();let{questionId:t,sortBy:s,page:a=1,pageSize:d=10}=e,i=(a-1)*d,o={};switch(s){case"highestUpvotes":o={upvotes:-1};break;case"lowestUpvotes":o={upvotes:1};break;case"recent":o={createdAt:-1};break;case"old":o={createdAt:1}}let l=await n.Z.find({question:t}).populate("author","_id clerkId name picture").sort(o).skip(i).limit(d),c=await n.Z.countDocuments({question:t}),f=c>i+l.length;return{answers:l,isNextAnswer:f}}catch(e){throw console.log(e),e}}async function upvoteAnswer(e){try{(0,r.v)();let{answerId:t,userId:s,hasupVoted:a,hasdownVoted:d,path:o}=e,c={};c=a?{$pull:{upvotes:s}}:d?{$pull:{downvotes:s},$push:{upvotes:s}}:{$addToSet:{upvotes:s}};let f=await n.Z.findByIdAndUpdate(t,c,{new:!0});if(!f)throw Error("Answer not found");await l.Z.findByIdAndUpdate(s,{$inc:{reputation:a?-2:2}}),await l.Z.findByIdAndUpdate(f.author,{$inc:{reputation:a?-10:10}}),(0,i.revalidatePath)(o)}catch(e){throw console.log(e),e}}async function downvoteAnswer(e){try{(0,r.v)();let{answerId:t,userId:s,hasupVoted:a,hasdownVoted:d,path:o}=e,c={};c=d?{$pull:{downvote:s}}:a?{$pull:{upvotes:s},$push:{downvotes:s}}:{$addToSet:{downvotes:s}};let f=await n.Z.findByIdAndUpdate(t,c,{new:!0});if(!f)throw Error("Answer not found");await l.Z.findByIdAndUpdate(s,{$inc:{reputation:d?-2:2}}),await l.Z.findByIdAndUpdate(f.author,{$inc:{reputation:d?-10:10}}),(0,i.revalidatePath)(o)}catch(e){throw console.log(e),e}}async function deleteAnswer(e){try{(0,r.v)();let{answerId:t,path:s}=e,a=await n.Z.findById(t);if(!a)throw Error("Answer not found");await a.deleteOne({_id:t}),await d.Z.updateMany({_id:a.question},{$pull:{answers:t}}),await o.Z.deleteMany({answer:t}),(0,i.revalidatePath)(s)}catch(e){console.log(e)}}(0,s(51419).h)([createAnswer,getAnswers,upvoteAnswer,downvoteAnswer,deleteAnswer]),(0,a.U)("a26cfab82e657f85461741e2621aa36d570f3e69",null,createAnswer),(0,a.U)("bd7a68644f0547dc34cbb8c8f4fc24ad0d5abb98",null,getAnswers),(0,a.U)("e8c78d4011846d98f1a75e21ef9379b111744f8c",null,upvoteAnswer),(0,a.U)("b11e4b41f2a7679048617314185a1a228f2628b3",null,downvoteAnswer),(0,a.U)("e65f0e73bb29bb59a1b3125c774525b8568a53ba",null,deleteAnswer)},72142:(e,t,s)=>{"use strict";s.r(t),s.d(t,{viewQuestion:()=>viewQuestion});var a=s(57016),n=s(10896),r=s(27977),d=s(92825);async function viewQuestion(e){try{await (0,r.connectToDatabase)();let{questionId:t,userId:s}=e;if(await n.default.findByIdAndUpdate(t,{$inc:{views:1}}),s){let e=await d.default.findOne({user:s,action:"view",question:t});if(e)return console.log("User has already viewed.");await d.default.create({user:s,action:"view",question:t})}}catch(e){throw console.log(e),e}}(0,s(96276).ensureServerEntryExports)([viewQuestion]),(0,a.createActionProxy)("a5d0446bf00a8fc42b9053a0f87464364d623485",null,viewQuestion)}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[9922,9859,9925,1209,6466,3640,70,416,672,9689,5123,3256,9614,5662,954,7505,8131,610,5447,9839,122],()=>__webpack_exec__(82533));module.exports=s})();